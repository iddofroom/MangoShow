# 🥭 מנגו דרור - דשבורד ניתוח נתונים

אפליקציית ניתוח נתונים מתקדמת לסיכום מכירות, למידת מחירים, וניתוח ביצועים לפי תאריכים ונקודות מכירה.

## ✨ תכונות

- **העלאת CSV** - העלאה פשוטה של קובץ נתונים
- **למידת מחירים אוטומטית** - המערכת לומדת מחירי מוצרים מהנתונים הקיימים
- **סינון לפי תאריכים** - אפשרות לצפות בנתונים לפי טווח תאריכים מותאם אישית
- **דשבורד אינטראקטיבי** - גרפים וטבלאות מעוצבות
- **סיכומים מקיפים**:
  - סיכום הכנסות כולל
  - פירוט לפי מוצרים
  - פירוט לפי נקודות מכירה
  - חישוב מחיר ממוצע למוצר
  - פירוט מוצרים לכל נקודת מכירה

## 📋 דרישות מערכת

- Node.js 18 ומעלה
- npm או yarn

## 🚀 התקנה והפעלה מקומית

### 1. התקן את התלויות
```bash
npm install
```

### 2. הרץ בסביבת פיתוח
```bash
npm run dev
```

האפליקציה תהיה זמינה בכתובת: `http://localhost:3000`

### 3. בניית גרסת ייצור
```bash
npm run build
npm start
```

## 🌐 פריסה ל-Netlify

### אופציה 1: דרך ממשק Netlify (מומלץ)

1. התחבר ל-[Netlify](https://netlify.com)
2. לחץ על "Add new site" > "Import an existing project"
3. חבר את הפרויקט שלך מ-GitHub/GitLab/Bitbucket
4. הגדרות בנייה:
   - **Build command**: `npm run build`
   - **Publish directory**: `out`
5. לחץ "Deploy site"

### אופציה 2: דרך Netlify CLI

```bash
# התקן Netlify CLI
npm install -g netlify-cli

# בנה את הפרויקט
npm run build

# פרוס לנטליפי
netlify deploy --prod
```

## 📊 פורמט קובץ CSV

הקובץ צריך להכיל את העמודות הבאות:

```
סכום כולל,פרטי הזמנה,כמות פריטים
150,קיט סוג א - ראש הנקרה , 27.10 : 10,10
200,קיט סוג ב - חיפה , 28.10 : 5,5
```

### מבנה העמודות:

- **עמודה A**: סכום כולל של ההזמנה (מספר)
- **עמודה B**: פרטי ההזמנה בפורמט: `מוצר - מיקום , תאריך : כמות`
- **עמודה C**: כמות פריטים בהזמנה (מספר)

### דוגמאות לפורמטים נתמכים:

#### הזמנה פשוטה:
```
150,קיט סוג א - ראש הנקרה , 27.10,10
```

#### הזמנה עם כמות מפורשת:
```
150,קיט סוג א - ראש הנקרה , 27.10 : 10,10
```

#### הזמנה מרובת מוצרים:
```
350,קיט סוג א - ראש הנקרה , 27.10 : 10, קיט סוג ב - חיפה , 28.10 : 5,15
```

### הערות חשובות:

1. **למידת מחירים**: המערכת לומדת מחירים מהזמנות עם מוצר יחיד (שם יש מידע מדויק על המחיר)
2. **השורה 5433**: החל משורה זו, המערכת מניחה שהפורמט משתנה ויש רק שם מוצר ללא מיקום
3. **פורמט תאריך**: dd.mm (לדוגמה: 27.10)

## 🎯 איך המערכת לומדת מחירים?

המערכת משתמשת באלגוריתם חכם ללמידת מחירים:

1. **למידה מהזמנות יחידות**: כאשר יש הזמנה עם מוצר אחד בלבד, המערכת יכולה לחשב את המחיר המדויק
2. **קיבוץ לפי מוצר, מיקום ותאריך**: המערכת שומרת מחירים שונים לפי הפרמטרים הללו
3. **חישוב ממוצע**: עבור מוצר עם מספר נקודות נתונים, המערכת מחשבת ממוצע משוקלל
4. **רמת ביטחון**: המערכת מחשבת רמת ביטחון לכל מחיר על בסיס עקביות הנתונים

### דוגמה:

אם יש 3 הזמנות של "קיט סוג א" בראש הנקרה ב-27.10:
- הזמנה 1: ₪150 / 10 יחידות = ₪15 ליחידה
- הזמנה 2: ₪160 / 10 יחידות = ₪16 ליחידה
- הזמנה 3: ₪155 / 10 יחידות = ₪15.5 ליחידה

**מחיר סופי**: ₪15.5 ליחידה (ממוצע)

## 📈 הדשבורד כולל

### סיכום כללי
- סה"כ הכנסות
- מספר הזמנות
- ממוצע להזמנה
- טווח תאריכים

### גרפים
- **גרף עמודות**: הכנסות לפי מוצר (10 המובילים)
- **גרף עוגה**: חלוקת הכנסות לפי נקודת מכירה

### טבלאות
- **טבלת מוצרים**: כל מוצר עם כמות, הכנסות ומחיר ממוצע
- **טבלת נקודות מכירה**: כל נקודה עם הכנסות ומספר מוצרים
- **פירוט מפורט**: פירוט מוצרים לכל נקודת מכירה

## 🛠️ טכנולוגיות

- **Next.js 14** - פריימוורק React
- **TypeScript** - טיפוסים סטטיים
- **Recharts** - גרפים אינטראקטיביים
- **PapaParse** - עיבוד קבצי CSV
- **Netlify** - אחסון ופריסה

## 📝 מבנה הפרויקט

```
mango-dashboard/
├── pages/
│   ├── _app.tsx          # הגדרות האפליקציה
│   ├── _document.tsx     # תמיכה ב-RTL ועברית
│   └── index.tsx         # הדף הראשי והדשבורד
├── utils/
│   └── dataProcessor.ts  # לוגיקת עיבוד נתונים
├── package.json          # תלויות
├── next.config.js        # הגדרות Next.js
├── tsconfig.json         # הגדרות TypeScript
├── netlify.toml          # הגדרות Netlify
└── README.md            # תיעוד
```

## 🎨 עיצוב

האפליקציה כוללת עיצוב מודרני ונקי עם:
- גרדיאנטים צבעוניים
- אנימציות חלקות
- ממשק מותאם לעברית (RTL)
- ריספונסיבי למובייל וטאבלט
- צבעי מותג עקביים

## 🔒 אבטחה

- אין שמירת נתונים בשרת - כל העיבוד נעשה בצד הלקוח
- קבצים לא נשמרים - רק נטענים לזיכרון
- ללא שליחת נתונים לשרתים חיצוניים

## 💡 טיפים

1. **קובץ גדול**: עבור קבצים גדולים (מעל 5000 שורות), ייתכן שיהיה עיכוב בעיבוד
2. **זיכרון דפדפן**: הדפדפן צריך זיכרון מספיק לעיבוד הנתונים
3. **פורמט נקי**: וודא שהקובץ CSV בפורמט תקין ללא תווים מיוחדים

## 🐛 פתרון בעיות

### הקובץ לא נטען
- ודא שהקובץ בפורמט CSV
- בדוק שיש לפחות 3 עמודות
- וודא שאין שורות ריקות בתחילת הקובץ

### נתונים לא מדויקים
- בדוק את הפורמט של עמודת פרטי ההזמנה
- וודא שהסכומים הכוללים נכונים
- ודא שפורמט התאריכים תקין (dd.mm)

### האפליקציה איטית
- נסה להפחית את גודל הקובץ
- סגור טאבים אחרים בדפדפן
- נסה דפדפן אחר (מומלץ Chrome)

## 📧 תמיכה

לשאלות ובעיות, פנה למפתח הפרויקט.

## 📜 רישיון

פרויקט פרטי - כל הזכויות שמורות

---

Made with ❤️ by Iddo
